<!DOCTYPE html>
<html lang="en">

<head>
		<meta charset="UTF-8"/>
		<meta name="description" content="description"/>
		<meta name="keywords" content="keywords"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta http-equiv="X-UA-Compatible" content="ie=edge"/>
		<link rel="shortcut icon" href="img/favicon.jpg"/>
		<title>Login Access</title>
		<!-- styles-->
		<link rel="stylesheet" href="css/styles.min.css"/>
		<link rel="stylesheet" href="https://cdn.datatables.net/1.11.3/css/jquery.dataTables.min.css"/>
		<link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.2.9/css/responsive.dataTables.min.css"/>
		<link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.0.1/css/buttons.dataTables.min.css"/>
		
		<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
		<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
		<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		
		
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" />
		<link rel="stylesheet" href="https://cdn.datatables.net/1.11.3/css/jquery.dataTables.min.css"/>
		<link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.2.9/css/responsive.dataTables.min.css"/>
		<link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.0.1/css/buttons.dataTables.min.css"/>
		<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
		<!-- web-font loader-->
		<script>
			WebFontConfig = {

				google: {

					families: ['Quicksand:300,400,500,700', 'Permanent+Marker:400'],

				}

			}

			function font() {

				var wf = document.createElement('script')

				wf.src = ('https:' == document.location.protocol ? 'https' : 'http') + '://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js'
				wf.type = 'text/javascript'
				wf.async = 'true'

				var s = document.getElementsByTagName('script')[0]

				s.parentNode.insertBefore(wf, s)

			}

			font()
		</script>
		<style>
/* CARD */
.card-counter{
    box-shadow: 2px 2px 10px #DADADA;
    margin: 5px;
    padding: 20px 10px;
    background-color: #fff;
    height: 100px;
    border-radius: 5px;
    transition: .3s linear all;
  }

  .card-counter:hover{
    box-shadow: 4px 4px 20px #DADADA;
    transition: .3s linear all;
  }

  .card-counter.primary{
    background-color: #007bff;
    color: #FFF;
  }

  .card-counter.danger{
    background-color: #ef5350;
    color: #FFF;
  }  

  .card-counter.success{
    background-color: #66bb6a;
    color: #FFF;
  }  

  .card-counter.info{
    background-color: #26c6da;
    color: #FFF;
  }  

  .card-counter i{
    font-size: 5em;
    opacity: 0.2;
  }

  .card-counter .count-numbers{
    position: absolute;
    right: 35px;
    top: 20px;
    font-size: 32px;
    display: block;
  }

  .card-counter .count-name{
    position: absolute;
    right: 35px;
    top: 65px;
    font-style: italic;
    text-transform: capitalize;
    opacity: 0.5;
    display: block;
    font-size: 18px;
  }




			@media screen and (min-width: 600px){
				.aside-dropdown{
					display: none;
				}
			}
			@media screen and (min-width: 600px){
				.dropdown-trigger__item{
					display: none;
				}
			}
.footer-memu {
	float: right
}

.footer-memu li {
	float: left;
	list-style-type:none;
}

.footer-memu li+li {
	margin-left: 30px
}

.footer-memu li a {
	text-transform: uppercase;
	color: white;
	font-size: 14px;
	line-height: 30px;
	text-decoration: none;
}

.footer-memu li a:hover {
	color: black
}
.loginBtn {
    box-sizing: border-box;
    position: relative;
    /* width: 13em;  - apply for fixed size */
    margin: 0.2em;
    padding: 0 15px 0 46px;
    border: none;
    text-align: left;
    line-height: 34px;
    white-space: nowrap;
    border-radius: 0.2em;
    font-size: 16px;
    color: #FFF;
  }
  .loginBtn:before {
    content: "";
    box-sizing: border-box;
    position: absolute;
    top: 0;
    left: 0;
    width: 34px;
    height: 100%;
  }
  .loginBtn:focus {
    outline: none;
  }
  .loginBtn:active {
    box-shadow: inset 0 0 0 32px rgba(0,0,0,0.1);
  }
  
  
  /* Facebook */
  .loginBtn--facebook {
    background-color: #4C69BA;
    background-image: linear-gradient(#4C69BA, #3B55A0);
    /*font-family: "Helvetica neue", Helvetica Neue, Helvetica, Arial, sans-serif;*/
    text-shadow: 0 -1px 0 #354C8C;
  }
  .loginBtn--facebook:before {
    border-right: #364e92 1px solid;
    background: url('https://s3-us-west-2.amazonaws.com/s.cdpn.io/14082/icon_facebook.png') 6px 6px no-repeat;
  }
  .loginBtn--facebook:hover,
  .loginBtn--facebook:focus {
    background-color: #5B7BD5;
    background-image: linear-gradient(#5B7BD5, #4864B1);
  }
  
  
  /* Google */
  .loginBtn--google {
    /*font-family: "Roboto", Roboto, arial, sans-serif;*/
    background: #DD4B39;
  }
  .loginBtn--google:before {
    border-right: #BB3F30 1px solid;
    background: url('https://s3-us-west-2.amazonaws.com/s.cdpn.io/14082/icon_google.png') 6px 6px no-repeat;
  }
  .loginBtn--google:hover,
  .loginBtn--google:focus {
    background: #E74B37;
  }
		</style>
	</head>
	<body>
		<div class="page-wrapper">
					<!-- mobile menu start-->
			<div class="mobile-nav">
				<div class="mobile-nav__inner">
					<div class="mobile-nav__item">
						<nav class="menu-holder">
							<ul class="mobile-menu">
								<li class="mobile-menu__item"><a class="mobile-menu__link" href="/admin-user">USERS</a></li>
								<li class="mobile-menu__item"><a class="mobile-menu__link" href="/admin-admin">ADMINS</a></li>
								<li class="mobile-menu__item"><a class="mobile-menu__link" href="/admin-icon">ICON</a></li>
								</li>
							</ul>
						</nav>
					</div>
				</div>
			</div>
			<!-- mobile menu end-->
			<!-- aside dropdown start-->
			<div class="aside-dropdown">
				<div class="aside-dropdown__inner"><span class="aside-dropdown__close">
					<svg class="icon">
						<use xlink:href="#close"></use>
					</svg></span>
					<div class="aside-dropdown__item d-lg-none d-block">
						<ul class="aside-menu">
									<li class="aside-menu__item aside-menu__item--has-child aside-menu__item--active"><a class="aside-menu__link" href="/admin-dashboard"><span>HOME</span></a>
									</li>
									</li>
									<li class="aside-menu__item aside-menu__item--has-child"><a class="aside-menu__link" href="/admin-music"><span>ICON</span></a>
									</li>
									<li class="aside-menu__item aside-menu__item--has-child"><a class="aside-menu__link" href="/admin-user"><span>USERS</span></a>
									</li>
									<li class="aside-menu__item aside-menu__item--has-child"><a class="aside-menu__link" href="/admin-admin"><span>ADMINS</span></a>
									</li>
						</ul>
					</div>
					
				</div>
			</div>
			<!-- aside dropdown end-->
			<!-- header start-->
			<header class="header header--front">
				<div class="container-fluid">
					<div class="row no-gutters justify-content-between">
						<div class="col-auto d-flex align-items-center">
							<div class="dropdown-trigger d-none d-sm-block">
								<div class="dropdown-trigger__item"></div>
							</div>
							<div class="header-logo"><a class="header-logo__link" href="/admin-dashboard"><img class="header-logo__img" src="img/logo_mono.png" alt="logo"/></a></div>
						</div>
						<div class="col-auto">
							<!-- main menu start-->
							<nav>
								<ul class="main-menu">
									<li class="main-menu__item main-menu__item--has-child main-menu__item--active"><a class="main-menu__link" href="/admin-dashboard"><span>HOME</span></a>
									</li>
									</li>
									<li class="main-menu__item main-menu__item--has-child"><a class="main-menu__link" href="/admin-icon"><span>ICON</span></a>
									</li>
									<li class="main-menu__item main-menu__item--has-child"><a class="main-menu__link" href="/admin-user"><span>USERS</span></a>
									</li>
									<li class="main-menu__item main-menu__item--has-child"><a class="main-menu__link" href="/admin-admin"><span>ADMINS</span></a>
									</li>
								</ul>
							</nav>
							<!-- main menu end-->
						</div>
						<div class="col-auto d-flex align-items-center">
							<!-- REGISTER BTN start-->
                                <!-- <ul class="aside-menu">
                                    <li class="aside-menu__item"><a class="aside-menu__link" href="#">View Profile</a></li>
                                    <li class="aside-menu__item"><a class="aside-menu__link" href="#">Sign Out</a></li>
                                </ul> -->

                                    <li class="lang-select__item lang-select__item--active" style="margin-right: 40px;"><span><i style="font-size: 30px;" class="fa fa-user" aria-hidden="true"></i></span>
                                        <ul class="lang-select__sub-list" style="width:200px;">
                                            <li><a href="/admin-logout">Sign Out</a></li>
                                        </ul>
                                    </li>
							<!-- REGISTER BTN end-->
							<div class="dropdown-trigger d-block d-sm-none">
								<div class="dropdown-trigger__item"></div>
							</div>
						</div>
					</div>
				</div>
			</header>
			<!-- header end-->
				<!-- header end-->
			<main class="main">
				<!-- promo start-->
				
				<!-- promo end-->

				<!-- section start-->
				<section class="section" style="margin-top: 50px;">
					<div class="container">
                        <div class="row margin-bottom">
							<div class="col-12">
								<h2 class="text text-center">Manage users</h2>
							</div>
						</div>
						<div class="col-md-12 offset-md-12 col-lg-12 offset-lg-12 col-xl-12 margin-bottom">
							<div  class="form account-form sign-in-form">
								<div class="form__fieldset">
									<h6 style="text-align: center;" class="form__title">Add new user</h6>
									<div  class="row">
										<div class="col-12">
											<input class="form__field" type="text" id="adminName"  placeholder="Name">
											<input class="form__field" type="text" id="adminUseranme"  placeholder="Username">
											<input class="form__field" type="email" id="adminEmail"  placeholder="Email">
											<input class="form__field" type="password" id="adminPassword"   placeholder="Password">
										</div>
										<div class="col-12 text-center">
											<button class="form__submit" onclick="addAdmin()">Add</button>
										</div>
										
									</div>
								</div>
							</div>
						</div>
						<table id="example" class="display responsive nowrap" style="width:100%">
							<thead>
								<tr>
									<th>#</th>
									<th>Name</th>
									<th>Username</th>
									<th>E-mail</th>
									<th>Password</th>
									<th>User status</th>
									<th>Action</th>
								</tr>
							</thead>
							<tbody>
								<% i=0 %>
							<% users.forEach( function(user){ %>
								<% ++i %>
								<tr>
									<td><%= i %></td>
									<td><%= user.name %></td>
									<td><%= user.username %></td>
									<td><%= user.email %></td>
									<td><%= user.password %></td>
									<td><%= user.status %></td>
									<td style="text-align: right;"><div class="dropdown">
										<button class="btn btn-success dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
										  Action
										</button>
										<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
											<div onclick="actionAdmin('suspend','<%= user.id %>','user')" class="dropdown-item" >Suspend</div>
											<div onclick="actionAdmin('activate','<%= user.id %>','user')" class="dropdown-item" >Activate</div>
										</div>
									  </div>
									</td>
								</tr>	
							<% }); %>
								
							</tbody>
						</table>


					</div>
				</section>
			</main>
			<!-- footer start-->
			<footer class="footer">
				<div class="container">
					
					<div class="row align-items-baseline">
						<div class="col-md-6">
							<p class="footer-copyright">© 2021 Copyright</p>
						</div>
						<div class="col-md-6">
							
						</div>
						<span>
                        Made with <i class="fa fa-heart pulse"> by </i>  
                        <a href="https://binarytechsolution.com.ng" style="text-decoration: none;  color: white;" target="_blank">Binary tech solution</a>
                    </span>
					</div>
				</div>
			</footer>
			<!-- footer end-->
			<div class="modal fade" id="loginModal" tabindex="-1"  role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
				<div class="modal-dialog modal-dialog-centered">
				  <div class="modal-content">
					<div style="background-color: #14ed38;" class="modal-header">
					  <h5 class="modal-title" id="exampleModalLabel">Sign In</h5>
					  <button type="button" class="close shadow-none" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					  </button>
					</div>
					<div class="modal-body form-group">
					  <form action="" autocomplete="off">
						<div class="form-group">
							<label for="username">Email:</label>
							<input class="form-control shadow-none"  placeholder="Email" type="email" id="email" required>
						</div>
						<div class="form-group">
							<label for="username">Password:</label>
							<input class="form-control shadow-none" placeholder="Password" type="password" id="password" required>
						</div>
						<div class="text text-center">
							<button type="button" class="btn btn-success shadow-none">Sign In</button>
						</div><br>
						<div>
							<span>Don't have an account yet? <a href="#" data-toggle="modal" data-target="#registerModal" style="text-decoration: none;">Sign Up</a></span>
							<a href="#"  style="text-decoration: none;float: right;">Forgot password</a>
						</div>
					  </form><br>

					  <h3 class="text text-center" style="font-size: 20px;">OR</h3>

						<div class="text text-center">
								Sign Up with your social media<br><br>
								<button class="loginBtn loginBtn--facebook">
								   Sign Up with Facebook
								 </button>
								 
								 <button class="loginBtn loginBtn--google">
								   Sign Up  with Google
								 </button>
						</div>
					</div>
					<!-- <div class="modal-footer">
					  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
					  <button type="button" class="btn btn-primary">Save changes</button>
					</div> -->
				  </div>
				</div>
			  </div>
			  <div class="modal fade" id="registerModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
				<div class="modal-dialog modal-dialog-centered" role="document">
				  <div class="modal-content">
					<div style="background-color: #14ed38;" class="modal-header">
					  <h5 class="modal-title" id="exampleModalLabel">Sign Up</h5>
					  <button type="button" class="close shadow-none" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					  </button>
					</div>
					<div class="modal-body form-group">
					  <form action="" autocomplete="off">
						<div class="form-group">
							<label for="username">Email:</label>
							<input class="form-control shadow-none"  placeholder="Email" type="email" id="email" required>
						</div>
						<div class="form-group">
							<label for="username">Password:</label>
							<input class="form-control shadow-none" placeholder="Password" type="password" id="password" required>
						</div>
						<div class="form-group">
							<label for="username">Confirm Password:</label>
						 <input class="form-control shadow-none"  placeholder="Confirm Password" type="password" id="cpassword" required>
						</div>
					  </form><br>

					  <h3 class="text text-center" style="font-size: 20px;">OR</h3>

						<div class="text text-center">
								Sign Up with your social media<br><br>
								<button class="loginBtn loginBtn--facebook">
								   Sign Up with Facebook
								 </button>
								 
								 <button class="loginBtn loginBtn--google">
								   Sign Up  with Google
								 </button>
						</div>
					</div>
					<!-- <div class="modal-footer">
					  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
					  <button type="button" class="btn btn-primary">Save changes</button>
					</div> -->
				  </div>
				</div>
			  </div>
		</div>
		<!-- libs-->
		<script src="js/jquery.min.js"></script>
		<script src="js/libs.min.js"></script>
		<!-- scripts-->
		<script src="js/common.min.js"></script>

		
		<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
		<script src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js"></script>
		<script src="https://cdn.datatables.net/responsive/2.2.9/js/dataTables.responsive.min.js"></script>
		<script src="https://cdn.datatables.net/buttons/2.0.1/js/dataTables.buttons.min.js"></script>
		<script src="https://cdn.datatables.net/buttons/2.0.1/js/buttons.colVis.min.js"></script>

		<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

		<script>
			$(document).ready(function() {
				$('#example').DataTable( {
					dom: 'Bfrtip',
					buttons: [
						'colvis'
					]
					} );
				} );
	
			
				function actionAdmin(action,adminId,manage) {
				var manage_id = adminId
	
				if(action === "suspend"){
				var manageAction = "suspended"
				}
				if(action === "activate"){
				var manageAction = "activated"
				}

				if(manage === "music"){
				var manageTable = "music"
				}
				if(manage === "admin"){
				var manageTable = "admin"
				}
				if(manage === "user"){
				var manageTable = "user"
				}
	
					sendDatas = {
						manage_id:manage_id,
						manageAction: manageAction,
						manageTable:manageTable
				}
				$.ajax({
				url:'/admin-action',
				method:'POST',
				headers:{
						  'Content-Type':'application/json',
						},
					data: JSON.stringify(sendDatas),
						success:function(data)
						{
							if(data.error == "errorAction"){
									swal("Error!", "An error occured", "error");
							}
							if(data.success == "successAction"){	
								swal({
						title: "Success",
						text: "DONE",
						icon: "success",
						dangerMode: false,
					})
					.then((ok) => {
                        if(ok){	
					location.replace('/admin-user')
						}
					})
							}
						}
				});
				}
	
	
				function addAdmin(){
				var inputNext_adminName = document.getElementById('adminName').value
				var inputNext_adminUseranme = document.getElementById('adminUseranme').value
				var inputNext_adminEmail = document.getElementById('adminEmail').value
				var inputNext_adminPassword= document.getElementById('adminPassword').value
		
			
				if(inputNext_adminUseranme === ""){
				   return  swal("Error!", "Username input is empty", "error");
				}
	
				if(inputNext_adminEmail === ""){
				   return  swal("Error!", "Email input is empty", "error");
				}
	
				if(inputNext_adminPassword === ""){
				return  swal("Error!", "Password input is empty", "error");
				}
				
	
				sendDatas = {
							inputNext_adminEmail:inputNext_adminEmail,
							inputNext_adminUseranme:inputNext_adminUseranme,
							inputNext_adminPassword:inputNext_adminPassword,
							inputNext_adminName:inputNext_adminName
				}
				$.ajax({
				url:'/register',
				method:'POST',
				headers:{
						  'Content-Type':'application/json',
						},
					data: JSON.stringify(sendDatas),
						success:function(data)
						{
							if(data.error == "exist"){
						swal("Error!", "Admin already exist with username or email!", "error");
							}
							if(data.success == "saved"){
								swal({
						title: "Success",
						text: "Creates successfully",
						icon: "success",
						dangerMode: false,
					})
					.then((ok) => {
                        if(ok){	
						document.getElementById('adminUseranme').value = ""
						document.getElementById('adminEmail').value = ""
						document.getElementById('adminPassword').value = ""	
					location.replace('/admin-user')
						}
					})
							
							}
						}
				});
			}
				
				 
		</script>
	</body>

</html>